<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>বর্তমান সাতক্ষীরা - বস্তুনিষ্ঠ সংবাদে অবিচল</title>

    <!-- === Open Graph / Facebook Meta Tags Start === -->
    <!-- এই ট্যাগগুলো ফেসবুক, হোয়াটসঅ্যাপ ও অন্যান্য সোশ্যাল মিডিয়ায় শেয়ার করার সময় ছবি ও শিরোনাম দেখাতে সাহায্য করে -->
    <meta property="og:title" content="বর্তমান সাতক্ষীরা - বস্তুনিষ্ঠ সংবাদে অবিচল">
    <meta property="og:description" content="সাতক্ষীরা জেলার সর্বশেষ সংবাদ পেতে ভিজিট করুন। বস্তুনিষ্ঠ সংবাদে আমরা অবিচল।">
    <meta property="og:image" content="https://i.imghippo.com/files/XP9933nMU.jpeg"> <!-- আপনার ওয়েবসাইটের একটি ডিফল্ট ছবির লিংক দিন -->
    <meta property="og:url" content="https://mm96i.github.io/Nahid-vai"> <!-- আপনার ওয়েবসাইটের মূল লিংক দিন -->
    <meta property="og:type" content="website" />
    <!-- === Open Graph / Facebook Meta Tags End === -->
    
    <!-- স্টাইল এবং ফন্ট এর জন্য যা যা ছিল -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;500;600;700&family=AdorshoLipi&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        :root { --primary-color: #d82028; --secondary-color: #222222; --background-color: #f0f2f5; --card-bg-color: #ffffff; --text-color: #333; --heading-color: #1a1a1a; --border-color: #e5e5e5; --font-main: 'Hind Siliguri', sans-serif; --font-heading: 'AdorshoLipi', 'Hind Siliguri', sans-serif; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: var(--font-main); background-color: var(--background-color); color: var(--text-color); font-size: 16px; line-height: 1.6; overflow-x: hidden; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 15px; }
        a { text-decoration: none; color: inherit; transition: color 0.2s; }
        a:hover { color: var(--primary-color); }
        img { max-width: 100%; height: auto; display: block; }
        h1, h2, h3, h4 { font-family: var(--font-heading); color: var(--heading-color); font-weight: 700; line-height: 1.3; }
        .clickable { cursor: pointer; }
        .header_top { background: var(--secondary-color); color: #fff; padding: 8px 0; }
        .header_top_content { display: flex; justify-content: space-between; align-items: center; }
        .header_top_content .date { font-size: 14px; }
        .header_top_content .social-icons a { color: #fff; margin-left: 16px; font-size: 15px; }
        .logo_area { background: #fff; padding: 20px 0; text-align: center; }
        .logo_area .logo { font-family: var(--font-heading); font-size: 3.5rem; color: var(--primary-color); }
        .main_menu_area { background: var(--primary-color); position: sticky; top: 0; z-index: 999; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .main_menu_area .container { display: flex; justify-content: space-between; align-items: center; }
        .main-menu { list-style: none; display: flex; flex-wrap: wrap; }
        .main-menu > li > a { color: #fff; padding: 15px 17px; display: block; font-size: 17px; font-weight: 600; }
        .main-menu > li > a:hover, .main-menu > li.active > a { background-color: rgba(0,0,0,0.2); }
        .mobile_menu_toggle { display: none; background: transparent; border: none; color: #fff; font-size: 24px; cursor: pointer; padding: 10px; }
        .mobile-menu-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 998; opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s; }
        .mobile-menu-overlay.active { opacity: 1; visibility: visible; }
        .ticker_area { padding: 20px 0 0; }
        .ticker_content { background: #fff; display: flex; align-items: center; padding: 5px; border-radius: 4px; }
        .ticker_content .title { background: var(--primary-color); color: #fff; font-weight: 700; padding: 10px 20px; font-size: 18px; white-space: nowrap;}
        .ticker_content .news_list { flex: 1; overflow: hidden; }
        .ticker_content .news_list marquee a { font-size: 17px; margin-right: 30px; font-weight: 500; }
        .main_content_area { padding: 30px 0; }
        .main_content { display: grid; grid-template-columns: 1fr; gap: 30px; }
        @media (min-width: 992px) { .main_content { grid-template-columns: 3fr 1fr; } }
        .lead_news_area { display: grid; grid-template-columns: 1fr; gap: 20px; }
        @media (min-width: 768px) { .lead_news_area { grid-template-columns: 2fr 1fr; } }
        /* Generic Post Styles */
        .single_post { background: #fff; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); overflow: hidden; transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out; margin-bottom: 20px; }
        .single_post:hover { transform: translateY(-5px); box-shadow: 0 5px 15px rgba(0,0,0,0.12); }
        .single_post .media { overflow: hidden; }
        .single_post .media img { width: 100%; object-fit: cover; transition: transform 0.3s ease-in-out; }
        .single_post:hover .media img { transform: scale(1.05); }
        .single_post .post-content { padding: 15px; }
        .post-meta { font-size: 0.85rem; color: #777; margin-top: 8px; }
        .full-story { display: none; margin-top: 15px; padding-top: 15px; border-top: 1px solid var(--border-color); line-height: 1.8; }
        /* Lead News Specific */
        .lead_news_left .single_post .media img { height: 420px; }
        .lead_news_left .single_post .post-content h2 { font-size: 2.2rem; margin-top: 15px; }
        .lead_news_right .single_post { display: flex; gap: 15px; }
        .lead_news_right .single_post .media { flex-shrink: 0; width: 120px; height: 80px; border-radius: 4px; }
        .lead_news_right .single_post .post-content { padding: 0; align-self: center; }
        .lead_news_right .single_post h3 { font-size: 1.1rem; font-weight: 600; }
        /* Category Section */
        .cat_area { margin-top: 40px; }
        .cat_title_modern { border-bottom: 3px solid var(--primary-color); margin-bottom: 25px; padding-bottom: 10px; display: flex; justify-content: space-between; align-items: center; }
        .cat_title_modern h2 { margin: 0; font-size: 24px; color: var(--heading-color); }
        .cat_title_modern a.view-all { font-size: 15px; font-weight: 600; color: var(--primary-color); }
        .cat_content { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 25px; }
        .cat_content .single_post .media img { height: 170px; }
        .cat_content .single_post h3 { font-size: 1.15rem; font-weight: 600; }
        /* Sidebar */
        .sidebar .widget { background: #fff; padding: 15px; margin-bottom: 30px; border-radius: 4px; }
        .sidebar .widget-title { background: var(--secondary-color); color: #fff; padding: 10px 15px; font-size: 18px; margin: -15px -15px 15px -15px; }
        .latest_post .single_post { display: flex; gap: 15px; padding-bottom: 15px; border-bottom: 1px solid var(--border-color); box-shadow: none; border-radius: 0; margin-bottom: 15px; }
        .latest_post .single_post:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
        .latest_post .single_post .media { flex-shrink: 0; width: 100px; height: 70px; border-radius: 4px; }
        .latest_post .single_post .post-content { padding: 0; }
        .latest_post .single_post h4 { font-size: 1rem; font-weight: 600; }
        /* Single Post Page Styles */
        .single-post-page { background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); margin-bottom: 30px; }
        .single-post-page .post-header { margin-bottom: 20px; }
        .single-post-page .post-header h1 { font-size: 2.5rem; margin-bottom: 10px; }
        .single-post-page .post-meta { color: #777; margin-bottom: 20px; }
        .single-post-page .post-image { margin-bottom: 20px; }
        .single-post-page .post-image img { width: 100%; max-height: 500px; object-fit: cover; border-radius: 8px; }
        .single-post-page .post-content { line-height: 1.8; font-size: 1.1rem; }
        .back-to-home { display: inline-block; margin-bottom: 20px; background: var(--primary-color); color: white; padding: 10px 20px; border-radius: 4px; font-weight: 600; }
        .back-to-home:hover { background: #c01a22; color: white; }
        .post-video { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; background: #000; margin-bottom: 20px; border-radius: 8px; }
        .post-video iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }
        /* Mobile Menu */
        @media (max-width: 991px) {
            .mobile_menu_toggle { display: block; }
            .main-menu { position: fixed; top: 0; left: -300px; width: 280px; height: 100vh; background: var(--secondary-color); flex-direction: column; justify-content: flex-start; padding: 20px; transition: left 0.3s ease-in-out; box-shadow: 3px 0 10px rgba(0,0,0,0.2); z-index: 1000; }
            .main-menu.active { left: 0; }
            .main-menu > li { width: 100%; }
            .single-post-page .post-header h1 { font-size: 1.8rem; }
        }

        /* --- শেয়ার বাটন স্টাইল --- */
        .share-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }
        .share-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--heading-color);
            font-weight: 600;
        }
        .share-buttons {
            display: flex;
            flex-wrap: wrap; 
            gap: 15px;
        }
        .share-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px 20px;
            border-radius: 50px;
            font-weight: 600;
            color: white;
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .share-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        .share-btn i {
            margin-right: 8px;
            font-size: 18px;
        }
        .fb-share { background: linear-gradient(135deg, #3b5998, #4a69a4); }
        .fb-share:hover { background: linear-gradient(135deg, #4a69a4, #3b5998); }
        .wa-share { background: linear-gradient(135deg, #25D366, #128C7E); }
        .wa-share:hover { background: linear-gradient(135deg, #128C7E, #25D366); }
        .copy-link { background: linear-gradient(135deg, #6c757d, #5a6268); }
        .copy-link:hover { background: linear-gradient(135deg, #5a6268, #6c757d); }

        @media (max-width: 576px) {
            .share-buttons {
                flex-direction: column;
                gap: 10px;
            }
            .share-btn { width: 100%; }
        }
    </style>
</head>
<body>
    
    <div class="mobile-menu-overlay" id="menu-overlay"></div>
    <header>
        <div class="header_top">
            <div class="container">
                <div class="header_top_content">
                    <div class="date" id="current-date-time">সাতক্ষীরা, লোড হচ্ছে...</div>
                    <div class="social-icons">
                        <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" aria-label="Youtube"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
            </div>
        </div>
        <div class="logo_area">
            <h1 class="logo">News সাতক্ষীরা</h1>
        </div>
    </header>

    <nav class="main_menu_area">
        <div class="container">
            <button class="mobile_menu_toggle" id="menu-toggle" aria-label="Open Menu"><i class="fas fa-bars"></i></button>
            <ul class="main-menu" id="main-menu">
                <li><a href="#home">সব খবর দেখুন</a></li>
                <li><a href="#?category=সাতক্ষীরা">সাতক্ষীরা</a></li>
                <li><a href="#?category=বাগেরহাট">বাগেরহাট</a></li>
                <li><a href="#?category=কট_খাইছে_রে_মামা">কট খাইছে রে মামা</a></li>
                <li><a href="#?category=জাতীয়">জাতীয়</a></li>
                <li><a href="#?category=রাজনীতি">রাজনীতি</a></li>
                <li><a href="#?category=খেলাধুলা">খেলাধুলা</a></li>
                <li><a href="#?category=বিনোদন">বিনোদন</a></li>
            </ul>
        </div>
    </nav>
    
    <section class="ticker_area">
        <div class="container"><div class="ticker_content"><div class="title">শিরোনাম</div><div class="news_list"><marquee id="breaking-news-container" onmouseover="this.stop();" onmouseout="this.start();">ব্রেকিং নিউজ লোড হচ্ছে...</marquee></div></div></div>
    </section>

    <main class="main_content_area">
        <div class="container"><div class="main_content">
            <div class="content" id="main-content-area">
                <p style="text-align:center;">খবর লোড হচ্ছে...</p>
            </div>
            <aside class="sidebar">
                <div class="widget"><h3 class="widget-title">সর্বশেষ সংবাদ</h3><div class="latest_post" id="latest-news-sidebar"><p style="text-align:center;">লোড হচ্ছে...</p></div></div>
                <div class="widget"><h3 class="widget-title">জনপ্রিয় সংবাদ</h3><div class="latest_post" id="popular-news-sidebar"><p style="text-align:center;">লোড হচ্ছে...</p></div></div>
            </aside>
        </div></div>
    </main>

    <footer class="footer_area" style="background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%); color: #fff; padding: 60px 0 30px; margin-top: 50px; position: relative; overflow: hidden;">
    <div class="container">
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 40px; margin-bottom: 40px; position: relative; z-index: 2;">
            
            <div class="footer_section">
                <div style="display: flex; align-items: center; margin-bottom: 25px;">
                    <div style="width: 50px; height: 50px; background: #d82028; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                        <i class="fas fa-newspaper" style="font-size: 24px;"></i>
                    </div>
                    <h3 style="color: #fff; margin: 0; font-size: 24px; font-weight: 700;">বর্তমান সাতক্ষীরা</h3>
                </div>
                <p style="line-height: 1.7; margin-bottom: 20px; color: #ccc;">বস্তুনিষ্ঠ সংবাদে অবিচল। সাতক্ষীরা জেলার প্রাণের সংবাদপত্র। স্থানীয়, জাতীয় ও আন্তর্জাতিক খবর সবার আগে জানতে আমাদের সাথে থাকুন।</p>
                <div style="display: flex; align-items: center;">
                    <div style="width: 40px; height: 40px; background: rgba(255,255,255,0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 10px;">
                        <i class="fas fa-award" style="color: #ff7b00;"></i>
                    </div>
                    <p style="margin: 0; color: #ff7b00; font-weight: 500;">সাতক্ষীরা, দেবহাটা ।</p>
                </div>
            </div>
            
            
            <div class="footer_section">
                <h3 style="color: #fff; margin-bottom: 25px; font-size: 22px; padding-bottom: 10px; border-bottom: 2px solid #d82028; display: inline-block;">যোগাযোগ তথ্য</h3>
                <div style="line-height: 1.9;">
                    <div style="display: flex; align-items: center; margin-bottom: 15px;">
                        <div style="width: 40px; height: 40px; background: rgba(216, 32, 40, 0.2); border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                            <i class="fas fa-map-marker-alt" style="color: #d82028;"></i>
                        </div>
                        <p style="margin: 0;">খুলনা বিভাগ, সাতক্ষীরা, দেবহাটা ।</p>
                    </div>
                    <div style="display: flex; align-items: center; margin-bottom: 15px;">
                        <div style="width: 40px; height: 40px; background: rgba(216, 32, 40, 0.2); border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                            <i class="fas fa-phone" style="color: #d82028;"></i>
                        </div>
                        <p style="margin: 0;">+880 192 292 8050</p>
                    </div>
                    <div style="display: flex; align-items: center; margin-bottom: 15px;">
                        <div style="width: 40px; height: 40px; background: rgba(216, 32, 40, 0.2); border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                            <i class="fas fa-envelope" style="color: #d82028;"></i>
                        </div>
                        <p style="margin: 0;">itznahidofficial69@gmail.com</p>
                    </div>
                    <div style="display: flex; align-items: center;">
                        <div style="width: 40px; height: 40px; background: rgba(216, 32, 40, 0.2); border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                            <i class="fas fa-globe" style="color: #d82028;"></i>
                        </div>
                        <p style="margin: 0;">www.github.io/nahid</p>
                    </div>
                </div>
            </div>
            
            
            <div class="footer_section">
                <h3 style="color: #fff; margin-bottom: 25px; font-size: 22px; padding-bottom: 10px; border-bottom: 2px solid #d82028; display: inline-block;">আমাদের সাথে যুক্ত থাকুন</h3>
                
                
                <div style="text-align: center; margin: 30px 0;">
                    <h4 style="color: #ddd; margin-bottom: 20px; font-weight: 600;">সোশ্যাল মিডিয়া</h4>
                    <div class="social-icons" style="display: flex; justify-content: center; gap: 15px; margin-bottom: 30px;">
                        <a href="#" aria-label="Facebook" style="display: inline-flex; width: 50px; height: 50px; background: linear-gradient(45deg, #3b5998, #4a69a4); color: white; border-radius: 50%; text-align: center; align-items: center; justify-content: center; transition: all 0.3s; box-shadow: 0 4px 10px rgba(0,0,0,0.2);"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" aria-label="Youtube" style="display: inline-flex; width: 50px; height: 50px; background: linear-gradient(45deg, #ff0000, #ff4d4d); color: white; border-radius: 50%; text-align: center; align-items: center; justify-content: center; transition: all 0.3s; box-shadow: 0 4px 10px rgba(0,0,0,0.2);"><i class="fab fa-youtube"></i></a>
                        <a href="#" aria-label="Twitter" style="display: inline-flex; width: 50px; height: 50px; background: linear-gradient(45deg, #1da1f2, #3bb4f8); color: white; border-radius: 50%; text-align: center; align-items: center; justify-content: center; transition: all 0.3s; box-shadow: 0 4px 10px rgba(0,0,0,0.2);"><i class="fab fa-twitter"></i></a>
                        <a href="#" aria-label="Instagram" style="display: inline-flex; width: 50px; height: 50px; background: linear-gradient(45deg, #e1306c, #fd1d1d); color: white; border-radius: 50%; text-align: center; align-items: center; justify-content: center; transition: all 0.3s; box-shadow: 0 4px 10px rgba(0,0,0,0.2);"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
                
                
                <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 10px; border: 1px solid rgba(255,255,0.1);">
                    <h4 style="color: #ddd; margin-bottom: 15px; text-align: center; font-weight: 600;">নিউজলেটার সাবস্ক্রাইব</h4>
                    <p style="color: #aaa; text-align: center; margin-bottom: 15px; font-size: 14px;">সর্বশেষ খবর পেতে ইমেইল দিন</p>
                    <div style="display: flex;">
                        <input type="email" placeholder="আপনার ইমেইল ঠিকানা" style="flex: 1; padding: 12px 15px; border: none; border-radius: 6px 0 0 6px; background: rgba(255,255,255,0.1); color: #fff;">
                        <button style="background: linear-gradient(45deg, #d82028, #ff7b00); color: white; border: none; padding: 0 20px; border-radius: 0 6px 6px 0; cursor: pointer; font-weight: 600; transition: all 0.3s;">সাবমিট</button>
                    </div>
                </div>
            </div>
        </div>
        
        
        <div style="text-align: center; padding-top: 30px; border-top: 1px solid rgba(255,255,255,0.1); position: relative; z-index: 2;">
            <div style="display: flex; justify-content: center; align-items: center; margin-bottom: 10px;">
                <div style="width: 30px; height: 30px; background: #d82028; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 10px;">
                    <i class="fas fa-user-edit" style="color: white; font-size: 14px;"></i>
                </div>
                <p style="margin: 0; font-weight: 500;">Developer by : It'z Nahid</p>
            </div>
            <p style="margin: 0; color: #aaa; font-size: 14px;">&copy; ২০২৫ বর্তমান সাতক্ষীরা দেবহাটা- সর্বস্বত্ব সংরক্ষিত</p>
        </div>
    </div>
</footer>

    <!-- Firebase SDK v8 -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyA3peBw2W7I80YoCTEpPVCnXelVLUQZMDE",
            authDomain: "satkhira-post.firebaseapp.com",
            projectId: "satkhira-post",
            storageBucket: "satkhira-post.appspot.com",
            messagingSenderId: "236510973672",
            appId: "1:236510973672:web:f83aa94577f1e99ddb435d",
            measurementId: "G-ELJFVZ64YJ"
        };

        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        const db = firebase.firestore();
        let allPosts = []; 

        function getTimeAgo(timestamp) {
            if (!timestamp) return '';
            const postDate = timestamp.toDate();
            const now = new Date();
            const seconds = Math.floor((now - postDate) / 1000);

            if (seconds < 60) return `এইমাত্র`;
            const minutes = Math.floor(seconds / 60);
            if (minutes < 60) return `${minutes} মিনিট আগে`;
            const hours = Math.floor(minutes / 60);
            if (hours < 24) return `${hours} ঘন্টা আগে`;
            
            return postDate.toLocaleDateString('bn-BD', {
                day: 'numeric',
                month: 'long',
                year: 'numeric'
            });
        }

        function createPostHTML(post, templateType = 'default') {
            const timeAgo = getTimeAgo(post.timestamp);
            
            if (templateType === 'lead_left') {
                return `
                <div class="single_post" data-id="${post.id}">
                    <div class="media clickable post-link"><img src="${post.imageUrl}" alt="${post.title}"></div>
                    <div class="post-content">
                        <h2 class="clickable post-link">${post.title}</h2>
                        <p class="post-meta">${timeAgo}</p>
                        <div class="full-story"><p>${post.content.replace(/\n/g, '<br>')}</p></div>
                    </div>
                </div>`;
            }
            if (templateType === 'lead_right') {
                return `
                <div class="single_post" data-id="${post.id}">
                    <div class="media clickable post-link"><img src="${post.imageUrl}" alt="${post.title}"></div>
                    <div class="post-content">
                        <h3 class="clickable post-link">${post.title}</h3>
                        <p class="post-meta">${timeAgo}</p>
                        <div class="full-story"><p>${post.content.replace(/\n/g, '<br>')}</p></div>
                    </div>
                </div>`;
            }
             if (templateType === 'sidebar') {
                return `
                <div class="single_post" data-id="${post.id}">
                    <div class="media clickable post-link"><img src="${post.imageUrl}" alt="${post.title}"></div>
                    <div class="post-content">
                        <h4 class="clickable post-link">${post.title}</h4>
                        <p class="post-meta">${timeAgo}</p>
                        <div class="full-story"><p>${post.content.replace(/\n/g, '<br>')}</p></div>
                    </div>
                </div>`;
            }
            return `
            <div class="single_post" data-id="${post.id}">
                <div class="media clickable post-link"><img src="${post.imageUrl}" alt="${post.title}"></div>
                <div class="post-content">
                    <h3 class="clickable post-link">${post.title}</h3>
                    <p class="post-meta">${timeAgo}</p>
                    <div class="full-story"><p>${post.content.replace(/\n/g, '<br>')}</p></div>
                </div>
            </div>`;
        }

        function renderHomePage(posts) {
            const mainContentArea = document.getElementById('main-content-area');
            if (posts.length === 0) {
                mainContentArea.innerHTML = '<p>কোনো খবর পাওয়া যায়নি।</p>';
                return;
            }

            const featuredLeft = createPostHTML(posts[0], 'lead_left');
            const featuredRightPosts = posts.slice(1, 4).map(p => createPostHTML(p, 'lead_right')).join('');
            
            const nationalPosts = posts.filter(p => p.category === 'জাতীয়').slice(0, 6).map(p => createPostHTML(p)).join('');
            const sportsPosts = posts.filter(p => p.category === 'খেলাধুলা').slice(0, 6).map(p => createPostHTML(p)).join('');

            mainContentArea.innerHTML = `
                <div class="lead_news_area">
                    <div class="lead_news_left">${featuredLeft}</div>
                    <div class="lead_news_right">${featuredRightPosts}</div>
                </div>
                <div class="cat_area">
                    <div class="cat_title_modern"><h2><a href="#?category=জাতীয়">জাতীয়</a></h2><a href="#?category=জাতীয়" class="view-all">সব দেখুন &rarr;</a></div>
                    <div class="cat_content">${nationalPosts || '<p>এই ক্যাটাগরিতে কোনো খবর নেই।</p>'}</div>
                </div>
                <div class="cat_area">
                    <div class="cat_title_modern"><h2><a href="#?category=খেলাধুলা">খেলাধুলা</a></h2><a href="#?category=খেলাধুলা" class="view-all">সব দেখুন &rarr;</a></div>
                    <div class="cat_content">${sportsPosts || '<p>এই ক্যাটাগরিতে কোনো খবর নেই।</p>'}</div>
                </div>
            `;
        }

        function renderCategoryPage(posts, category) {
            const mainContentArea = document.getElementById('main-content-area');
            const categoryPosts = posts.filter(p => p.category === category);
            
            if (categoryPosts.length === 0) {
                mainContentArea.innerHTML = `
                    <div class="cat_area"><div class="cat_title_modern"><h2>${category}</h2></div>
                    <p>দুঃখিত, এই ক্যাটাগরিতে কোনো খবর পাওয়া যায়নি।</p></div>`;
                return;
            }
            
            const postsHTML = categoryPosts.map(p => createPostHTML(p)).join('');
            mainContentArea.innerHTML = `
                <div class="cat_area">
                    <div class="cat_title_modern"><h2>${category}</h2></div>
                    <div class="cat_content">${postsHTML}</div>
                </div>
            `;
        }
        
        function createVideoEmbed(videoUrl) {
            let embedHtml = '';
            if (videoUrl.includes('youtube.com/watch?v=') || videoUrl.includes('youtu.be/')) {
                let videoId;
                if (videoUrl.includes('youtube.com/watch?v=')) {
                    videoId = videoUrl.split('v=')[1].split('&')[0];
                } else {
                    videoId = videoUrl.split('youtu.be/')[1].split('?')[0];
                }
                const embedUrl = `https://www.youtube.com/embed/${videoId}`;
                embedHtml = `<div class="post-video"><iframe src="${embedUrl}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>`;
            }
            else if (videoUrl.includes('drive.google.com/file/d/')) {
                const fileId = videoUrl.split('/d/')[1].split('/')[0];
                const embedUrl = `https://drive.google.com/file/d/${fileId}/preview`;
                embedHtml = `<div class="post-video"><iframe src="${embedUrl}" frameborder="0" allow="fullscreen" allowfullscreen sandbox="allow-scripts allow-same-origin allow-presentation"></iframe></div>`;
            }
            return embedHtml;
        }

        function getShareUrl() {
            return window.location.href;
        }

        function shareOnFacebook() {
            const url = encodeURIComponent(getShareUrl());
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`, '_blank');
        }
        
        function shareOnWhatsApp() {
            const url = encodeURIComponent(getShareUrl());
            const text = encodeURIComponent("এই সংবাদটি দেখুন: ");
            window.open(`https://wa.me/?text=${text}${url}`, '_blank');
        }

        function copyLink(buttonElement) {
            const url = getShareUrl();
            navigator.clipboard.writeText(url).then(() => {
                const originalHTML = buttonElement.innerHTML;
                buttonElement.innerHTML = `<i class="fas fa-check"></i> কপি হয়েছে!`;
                buttonElement.disabled = true;
                setTimeout(() => {
                    buttonElement.innerHTML = originalHTML;
                    buttonElement.disabled = false;
                }, 2000);
            }).catch(err => {
                console.error('লিংক কপি করা যায়নি: ', err);
                alert('দুঃখিত, লিংক কপি করা সম্ভব হয়নি।');
            });
        }

        function renderSinglePostPage(postId) {
            const post = allPosts.find(p => p.id === postId);
            const mainContentArea = document.getElementById('main-content-area');
            
            if (!post) {
                mainContentArea.innerHTML = '<p>পোস্টটি পাওয়া যায়নি।</p>';
                // ডিফল্ট মেটা ট্যাগ রিসেট করুন যদি প্রয়োজন হয়
                document.title = 'বর্তমান সাতক্ষীরা - বস্তুনিষ্ঠ সংবাদে অবিচল';
                return;
            }

            // === মেটা ট্যাগ আপডেট করার কোড ===
            document.title = `${post.title} | বর্তমান সাতক্ষীরা`;
            document.querySelector('meta[property="og:title"]').setAttribute("content", post.title);
            document.querySelector('meta[property="og:description"]').setAttribute("content", post.content.substring(0, 160) + "..."); // কন্টেন্টের প্রথম ১৬০ অক্ষর
            document.querySelector('meta[property="og:image"]').setAttribute("content", post.imageUrl);
            document.querySelector('meta[property="og:url"]').setAttribute("content", window.location.href);
            document.querySelector('meta[property="og:type"]').setAttribute("content", "article");
            // === মেটা ট্যাগ আপডেট শেষ ===
            
            const timeAgo = getTimeAgo(post.timestamp);
            let mediaContent = '';
            if (post.videoUrl) {
                mediaContent = createVideoEmbed(post.videoUrl);
            } else if (post.imageUrl) {
                mediaContent = `
                <div class="post-image">
                    <img src="${post.imageUrl}" alt="${post.title}">
                </div>`;
            }

            const shareSection = `
                <div class="share-section">
                    <div class="share-title">এই খবরটি শেয়ার করুন:</div>
                    <div class="share-buttons">
                        <div class="share-btn fb-share" onclick="shareOnFacebook()">
                            <i class="fab fa-facebook-f"></i> Facebook
                        </div>
                        <div class="share-btn wa-share" onclick="shareOnWhatsApp()">
                            <i class="fab fa-whatsapp"></i> WhatsApp
                        </div>
                        <div class="share-btn copy-link" onclick="copyLink(this)">
                            <i class="fas fa-link"></i> লিংক কপি করুন
                        </div>
                    </div>
                </div>
            `;

            mainContentArea.innerHTML = `
                <a href="#home" class="back-to-home"><i class="fas fa-arrow-left"></i> সব খবরে ফিরে যান</a>
                <div class="single-post-page">
                    <div class="post-header">
                        <h1>${post.title}</h1>
                        <div class="post-meta">${timeAgo} | ${post.category}</div>
                    </div>
                    ${mediaContent}
                    <div class="post-content">
                        <p>${post.content.replace(/\n/g, '<br>')}</p>
                    </div>
                    ${shareSection}
                </div>
            `;
        }

        async function displayNews() {
            try {
                if (allPosts.length === 0) {
                    const snapshot = await db.collection('posts').orderBy('timestamp', 'desc').get();
                    snapshot.forEach(doc => allPosts.push({ id: doc.id, ...doc.data() }));
                }

                if (allPosts.length > 0) {
                    const breakingPosts = allPosts.filter(p => p.isBreaking).slice(0, 10);
                    if (breakingPosts.length === 0) breakingPosts.push(...allPosts.slice(0, 5));
                    document.getElementById('breaking-news-container').innerHTML = breakingPosts.map(p => `<a href="#post?id=${p.id}">${p.title}</a>`).join('');
                    document.getElementById('latest-news-sidebar').innerHTML = allPosts.slice(0, 5).map(p => createPostHTML(p, 'sidebar')).join('');
                    document.getElementById('popular-news-sidebar').innerHTML = allPosts.slice(5, 10).map(p => createPostHTML(p, 'sidebar')).join('');
                }

                const hash = window.location.hash;
                if (hash && hash.includes('?category=')) {
                    const category = decodeURIComponent(hash.split('=')[1]);
                    renderCategoryPage(allPosts, category);
                } else if (hash && hash.includes('post?id=')) {
                    const postId = hash.split('=')[1];
                    renderSinglePostPage(postId);
                } else {
                    renderHomePage(allPosts);
                    // হোমপেজের জন্য মেটা ট্যাগগুলো ডিফল্ট অবস্থায় রিসেট করা
                    document.title = 'বর্তমান সাতক্ষীরা - বস্তুনিষ্ঠ সংবাদে অবিচল';
                    document.querySelector('meta[property="og:title"]').setAttribute("content", "বর্তমান সাতক্ষীরা - বস্তুনিষ্ঠ সংবাদে অবিচল");
                    document.querySelector('meta[property="og:description"]').setAttribute("content", "সাতক্ষীরা জেলার সর্বশেষ সংবাদ পেতে ভিজিট করুন। বস্তুনিষ্ঠ সংবাদে আমরা অবিচল।");
                    document.querySelector('meta[property="og:image"]').setAttribute("content", "https://i.imghippo.com/files/XP9933nMU.jpeg"); // আপনার ডিফল্ট ছবি
                    document.querySelector('meta[property="og:url"]').setAttribute("content", "https://mm96i.github.io/Nahid-vai"); // আপনার মূল ডোমেইন
                    document.querySelector('meta[property="og:type"]').setAttribute("content", "website");
                }

            } catch (error) {
                console.error("Error loading news:", error);
                document.getElementById('main-content-area').innerHTML = '<p>খবর লোড করতে সমস্যা হয়েছে। অনুগ্রহ করে কিছুক্ষণ পর আবার চেষ্টা করুন।</p>';
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            const menuToggle = document.getElementById('menu-toggle');
            const mainMenu = document.getElementById('main-menu');
            const menuOverlay = document.getElementById('menu-overlay');
            if(menuToggle) {
                const toggleMenu = () => {
                    mainMenu.classList.toggle('active');
                    menuOverlay.classList.toggle('active');
                };
                menuToggle.addEventListener('click', toggleMenu);
                menuOverlay.addEventListener('click', toggleMenu);
            }

            const dateTimeElement = document.getElementById('current-date-time');
            function updateDateTime() {
                const now = new Date();
                const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit', hour12: true };
                dateTimeElement.textContent = `সাতক্ষীরা | ${now.toLocaleDateString('bn-BD', options)}`;
            }
            updateDateTime();
            setInterval(updateDateTime, 30000); 

            document.body.addEventListener('click', function(event) {
                if (event.target.closest('.post-link')) {
                    const postContainer = event.target.closest('.single_post');
                    if (postContainer) {
                        window.location.hash = `post?id=${postContainer.getAttribute('data-id')}`;
                    }
                }
                
                if (event.target.closest('.main-menu a')) {
                    if (mainMenu.classList.contains('active')) {
                        mainMenu.classList.remove('active');
                        menuOverlay.classList.remove('active');
                    }
                }
            });
            
            displayNews(); 
            window.addEventListener('hashchange', displayNews);
        });
    </script>
    
</body>



</html>




